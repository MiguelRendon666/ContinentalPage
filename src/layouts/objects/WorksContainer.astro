---
import WorkContainerItem from "./WorkContainerItem.astro";
import { ObraFetch } from "../../fetch/obra-fetch";
import type { Obra } from "../../models/obra";
import type { ApiError } from "../../models/api-error";

const { actual_show } = Astro.props;
const obrasResponse : Obra[] | ApiError = await ObraFetch.getAll();
const isError = 'error' in obrasResponse;
---

{isError ? (
    <div></div>
) : (
    <div class="w-container-entire">
        <h2>Selecciona la obra que desees leer</h2>
        <hr>
        <div class="w-container-list">
            {(obrasResponse as Obra[]).map((obra) => (
            <WorkContainerItem show={obra} isActive={obra.url == actual_show} />
            ))}
        </div>
    </div>
)}

<style>
    .w-container-entire {
        padding-block: 1rem;
        padding-inline: 1.5rem;
        background-color: var(--color-bg-obsidian);
        border-radius: 1.5rem;
    }
    .w-container-list {
        display: flex;
        flex-direction: column;
        gap: .5rem;
    }
</style>