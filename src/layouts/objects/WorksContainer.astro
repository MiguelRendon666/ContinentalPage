---
import WorkContainerItem from "./WorkContainerItem.astro";
import { ObraFetch } from "../../fetch/obra-fetch";
import type { Obra } from "../../models/obra";
import type { ApiError } from "../../models/api-error";

const { actual_show } = Astro.props;
const obrasResponse : Obra[] | ApiError = await ObraFetch.getAll();
const isError = 'error' in obrasResponse;
---

{isError ? (
    <div></div>
) : (
    <div class="w-container-entire">
        <h2>Selecciona la obra que desees leer</h2>
        <hr>
        <div class="w-container-list">
            {(obrasResponse as Obra[]).map((obra) => (
            <WorkContainerItem show={obra} isActive={obra.url == actual_show} />
            ))}
        </div>
    </div>
)}

<style>
    .w-container-entire {
        padding-block: 1rem;
        padding-inline: 1.5rem;
        background-color: var(--color-bg-obsidian);
        border-radius: 1.5rem;
    }
    .w-container-list {
        display: flex;
        flex-direction: column;
        gap: .5rem;
    }

    /* Media Queries para Responsividad */

    /* Tablets (max-width: 768px) */
    @media (max-width: 768px) {
        .w-container-entire {
            padding-block: 0.75rem;
            padding-inline: 1.25rem;
            border-radius: 1.25rem;
        }

        .w-container-entire h2 {
            font-size: 1.25rem;
        }
    }

    /* MÃ³viles (max-width: 480px) */
    @media (max-width: 480px) {
        .w-container-entire {
            padding-block: 0.5rem;
            padding-inline: 1rem;
            border-radius: 1rem;
        }

        .w-container-entire h2 {
            font-size: 1.1rem;
        }

        .w-container-list {
            gap: 0.4rem;
        }
    }
</style>